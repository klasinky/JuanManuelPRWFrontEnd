<div class="container pt-5 ">
  <div class="row">

    <div class="col-md-6">
      <div class="bgsecondary p-3 p-md-5">
        <div class="text-center">
          <h2 class="title">Cambiar Datos</h2>
        </div>
        <form [formGroup]="formProfile">
          <div class="row text-light">
            <div class="col-md-12 input-field mx-auto">
              <i class="fas fa-quote-right"></i>
              <input type="text" [value]="user?.name" formControlName="name" placeholder="Nombre" autocomplete="off">
            </div>
            <div class="col-md-12 input-field mx-auto">
              <i class="fas fa-quote-right"></i>
              <input type="text" [value]="user?.email" formControlName="email" placeholder="Email" autocomplete="off">
            </div>

          </div>

          <div class="row">
            <div class="col-md-12 input-field mx-auto">
              <i class="fas fa-quote-right"></i>
              <input type="text" [value]="user?.username" formControlName="username" placeholder="Username"
                autocomplete="off">
            </div>
            <div class="col-md-12 input-field mx-auto">
              <i class="fas fa-arrow-down"></i>
              <select formControlName="currency" aria-label="Default select">
                <option value="" disabled>Elige una divisa...</option>
                <option>€</option>
                <option>$</option>
              </select>
            </div>

          </div>

          <div class="row">
            <div class="col-md-12 text-center">
              <button class="btn btn-auth">Editar datos</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="col-md-6">
      <div class="bgsecondary p-3 p-md-5">
        <div class="text-center">
          <h2 class="title">Cambiar Contraseña</h2>
        </div>
        <form [formGroup]="formPassword">

          <div class="row text-light">
            <div class="col-md-12 input-field mx-auto" [class.is-valid]="this.formPassword.get('old_password')?.valid"
              [class.is-invalid]="this.formPassword.get('old_password')?.invalid && this.formPassword.get('old_password')?.touched || oldPasswordError == true">
              <i class="fas fa-quote-right"></i>
              <input type="text" formControlName="old_password" placeholder="Contraseña actual" autocomplete="off">
            </div>

            <div *ngIf="oldPasswordError" >
              <div class="text-center" *ngFor="let item of oldPasswordErrorMessage">
                <label class="text-danger">{{item}}</label>
              </div>
            </div>

            <div class="col-md-12 input-field mx-auto"
              [class.is-valid]="this.formPassword.get('new_password')?.valid"
              [class.is-invalid]="this.formPassword.get('new_password')?.invalid && this.formPassword.get('new_password')?.touched || newPasswordError == true">
              <i class="fas fa-quote-right"></i>
              <input type="text" formControlName="new_password" placeholder="Contraseña nueva"
                autocomplete="off">
            </div>

            <div *ngIf="newPasswordError" >
              <div class="text-center" *ngFor="let item of newPasswordErrorMessage">
                <label class="text-danger">{{item}}</label>
              </div>
            </div>

            <div class="col-md-12 text-center">
              <button [disabled]='this.formPassword.invalid || showLoader' (click)="changeUserPasswordAction()"
                class="btn-auth solid">
                <div *ngIf="!showLoader; else blockLoader">
                  Guardar
                </div>
                <ng-template #blockLoader>
                  <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                  </div>
                </ng-template>
              </button>
            </div>
          </div>

        </form>
      </div>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col-md-12">
      <div class="bgsecondary p-2 text-center">
        <p class="m-3">Último inicio de sesión: <strong>{{ user?.last_login | amParse:'YYYY/MM/DD HH:mm' | amLocale:'es'
            | amDateFormat:'YYYY/MM/DD HH:mm'}}</strong> </p>
      </div>
    </div>
  </div>


</div>